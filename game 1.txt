<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>تسجيل لعبة 14</title>
<style>
  body { font-family: Arial, sans-serif; direction: rtl; margin: 20px; }
  table { border-collapse: collapse; width: 100%; text-align: center; }
  th, td { border: 1px solid #000; padding: 5px; width: 14%; }
  input { width: 80%; text-align: center; }
  select { margin: 10px; }
</style>
</head>
<body>

<h2>تسجيل لعبة 14</h2>

<table id="scoreTable">
  <thead>
    <tr>
      <th><input type="text" value="اللاعب 1" class="playerName"></th>
      <th><input type="text" value="اللاعب 2" class="playerName"></th>
      <th><input type="text" value="اللاعب 3" class="playerName"></th>
      <th><input type="text" value="اللاعب 4" class="playerName"></th>
      <th><input type="text" value="اللاعب 5" class="playerName"></th>
      <th><input type="text" value="اللاعب 6" class="playerName"></th>
    </tr>
  </thead>
  <tbody>
    <!-- 10 أسطر للنقاط -->
    <script>
      for(let i=0;i<10;i++){
        document.write('<tr>');
        for(let j=0;j<6;j++){
          document.write('<td><input type="number" value="0" class="score" oninput="updateScores()"></td>');
        }
        document.write('</tr>');
      }
    </script>
  </tbody>
  <tfoot>
    <tr>
      <th id="sum0">0</th>
      <th id="sum1">0</th>
      <th id="sum2">0</th>
      <th id="sum3">0</th>
      <th id="sum4">0</th>
      <th id="sum5">0</th>
    </tr>
    <tr>
      <th id="rank0">-</th>
      <th id="rank1">-</th>
      <th id="rank2">-</th>
      <th id="rank3">-</th>
      <th id="rank4">-</th>
      <th id="rank5">-</th>
    </tr>
  </tfoot>
</table>

<h3>فرق النقاط بين لاعبين</h3>
<select id="playerA"></select>
<select id="playerB"></select>
<span id="diffResult">0</span>

<script>
function updateScores(){
  let sums = [];
  let rows = document.querySelectorAll('#scoreTable tbody tr');
  for(let c=0;c<6;c++){
    let sum = 0;
    rows.forEach(r=>{
      sum += parseInt(r.cells[c].querySelector('input').value)||0;
    });
    sums[c]=sum;
    document.getElementById('sum'+c).innerText=sum;
  }
  // ترتيب المراكز
  let ranks = Array.from({length:6}, (_,i)=>i);
  ranks.sort((a,b)=>sums[a]-sums[b]);
  let rankDisplay = Array(6);
  ranks.forEach((val,index)=>{ rankDisplay[val]=index+1; });
  for(let i=0;i<6;i++){
    document.getElementById('rank'+i).innerText=rankDisplay[i];
  }
  updateDiff();
}

// إعداد قوائم اللاعبين لفرق النقاط
function setupPlayerSelects(){
  let selects = [document.getElementById('playerA'), document.getElementById('playerB')];
  selects.forEach(sel=>{
    sel.innerHTML='';
    document.querySelectorAll('.playerName').forEach((inp,i)=>{
      let opt = document.createElement('option');
      opt.value=i;
      opt.text=inp.value;
      sel.appendChild(opt);
    });
  });
}
document.querySelectorAll('.playerName').forEach(inp=>{
  inp.addEventListener('input', setupPlayerSelects);
});
setupPlayerSelects();

// حساب فرق النقاط بين اللاعبين المختارين
function updateDiff(){
  let a = parseInt(document.getElementById('playerA').value);
  let b = parseInt(document.getElementById('playerB').value);
  let sumA = parseInt(document.getElementById('sum'+a).innerText);
  let sumB = parseInt(document.getElementById('sum'+b).innerText);
  document.getElementById('diffResult').innerText = sumA - sumB;
}
document.getElementById('playerA').addEventListener('change', updateDiff);
document.getElementById('playerB').addEventListener('change', updateDiff);

</script>

</body>
</html>